<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LUCKY LOG</title>
    <link rel="icon" th:href="@{/images/lucky-log-logo.png}" type="image/x-icon">
    <link th:href="@{/css/fortune-result.css}" rel="stylesheet">
</head>

<body>
    <div class="holographic-bg"></div>

    <div class="emoji-decoration">🔮</div>
    <div class="emoji-decoration">✨</div>
    <div class="emoji-decoration">🌟</div>
    <div class="emoji-decoration">🎪</div>
    <div class="emoji-decoration">🪂</div>

    <div class="container">
        <div class="header">
            <div class="ai-badge">
                <span class="ai-icon" th:text="${fortuneOption.ai != null and #strings.contains(fortuneOption.ai, ' ') ?
                #strings.substringBefore(fortuneOption.ai, ' ') :
                (fortuneOption.ai != null ? fortuneOption.ai : '🤖')}">
                </span>
                <span id="ai-name" th:text="${fortuneOption.ai != null and #strings.contains(fortuneOption.ai, ' ') ?
                #strings.substringAfter(fortuneOption.ai, ' ') : 'AI'}">
                </span>
            </div>
            <p class="user-info" th:if="${birthInfo != null}">
                <span th:text="${birthInfo.city}">도시</span>
                <span th:text="${birthInfo.gender == 'male' ? '남성' : '여성'}">성별</span>
                <span
                    th:text="${birthInfo.calendar == 'solar' ? '양력' : (birthInfo.calendar == 'lunar' ? '음력(평달)' : '음력(윤달)')}">력</span>
                <br>
                <span th:text="${birthInfo.year}">년</span>년
                <span th:text="${birthInfo.month}">월</span>월
                <span th:text="${birthInfo.day}">일</span>일
                <span th:if="${birthInfo.time != null}" th:text="${birthInfo.time}">시간</span>
            </p>
        </div>

        <div class="loading-screen" id="loading-screen">
            <div class="loading-animation">
                <div class="loading-ring"></div>
            </div>
            <div class="loading-text">🔮 운세 분석 중...</div>
            <div class="loading-subtext">AI가 당신의 사주를 분석하고 있습니다</div>
            <div class="scanline"></div>
        </div>

        <!-- 결과 화면 -->
        <div class="results-screen" id="results-screen">
            <div class="results-container" id="results-container">

                <!-- 전체 운세 결과가 있는 경우에만 표시 -->
                <div th:if="${fortuneResult != null}">

                    <!-- 종합운 (overall) -->
                    <div th:if="${fortuneResult.overall != null}" class="fortune-section">
                        <div class="fortune-title">
                            <span class="fortune-icon">🔮</span>
                            <span>종합운</span>
                        </div>
                        <div class="fortune-content-wrapper">
                            <div class="fortune-content" th:text="${fortuneResult.overall}">
                                종합운 내용이 여기에 표시됩니다.
                            </div>
                        </div>
                    </div>

                    <!-- 금전운 (money) -->
                    <div th:if="${fortuneResult.money != null}" class="fortune-section">
                        <div class="fortune-title">
                            <span class="fortune-icon">💰</span>
                            <span>금전운</span>
                        </div>
                        <div class="fortune-content-wrapper">
                            <div class="fortune-content" th:text="${fortuneResult.money}">
                                금전운 내용이 여기에 표시됩니다.
                            </div>
                        </div>
                    </div>

                    <!-- 사랑운 (love) -->
                    <div th:if="${fortuneResult.love != null}" class="fortune-section">
                        <div class="fortune-title">
                            <span class="fortune-icon">💕</span>
                            <span>사랑운</span>
                        </div>
                        <div class="fortune-content-wrapper">
                            <div class="fortune-content" th:text="${fortuneResult.love}">
                                사랑운 내용이 여기에 표시됩니다.
                            </div>
                        </div>
                    </div>

                    <!-- 직업운 (career) -->
                    <div th:if="${fortuneResult.career != null}" class="fortune-section">
                        <div class="fortune-title">
                            <span class="fortune-icon">💼</span>
                            <span>직업운</span>
                        </div>
                        <div class="fortune-content-wrapper">
                            <div class="fortune-content" th:text="${fortuneResult.career}">
                                직업운 내용이 여기에 표시됩니다.
                            </div>
                        </div>
                    </div>

                    <!-- 학업운 (study) -->
                    <div th:if="${fortuneResult.study != null}" class="fortune-section">
                        <div class="fortune-title">
                            <span class="fortune-icon">📚</span>
                            <span>학업운</span>
                        </div>
                        <div class="fortune-content-wrapper">
                            <div class="fortune-content" th:text="${fortuneResult.study}">
                                학업운 내용이 여기에 표시됩니다.
                            </div>
                        </div>
                    </div>

                    <!-- 행운 (luck) -->
                    <div th:if="${fortuneResult.luck != null}" class="fortune-section">
                        <div class="fortune-title">
                            <span class="fortune-icon">🍀</span>
                            <span>행운</span>
                        </div>
                        <div class="fortune-content-wrapper">
                            <div class="fortune-content" th:text="${fortuneResult.luck}">
                                행운 내용이 여기에 표시됩니다.
                            </div>
                        </div>
                    </div>

                    <!-- 가족운 (family) -->
                    <div th:if="${fortuneResult.family != null}" class="fortune-section">
                        <div class="fortune-title">
                            <span class="fortune-icon">👨‍👩‍👧‍👦</span>
                            <span>가족운</span>
                        </div>
                        <div class="fortune-content-wrapper">
                            <div class="fortune-content" th:text="${fortuneResult.family}">
                                가족운 내용이 여기에 표시됩니다.
                            </div>
                        </div>
                    </div>

                    <!-- 건강운 (health) -->
                    <div th:if="${fortuneResult.health != null}" class="fortune-section">
                        <div class="fortune-title">
                            <span class="fortune-icon">🏥</span>
                            <span>건강운</span>
                        </div>
                        <div class="fortune-content-wrapper">
                            <div class="fortune-content" th:text="${fortuneResult.health}">
                                건강운 내용이 여기에 표시됩니다.
                            </div>
                        </div>
                    </div>

                </div>

                <!-- 운세 결과가 없는 경우 -->
                <div th:if="${fortuneResult == null}" class="no-results">
                    <div class="no-results-icon">🔮</div>
                    <div class="no-results-text">운세 결과를 불러올 수 없습니다</div>
                    <div class="no-results-subtext">다시 시도해주세요</div>
                </div>

            </div>

            <div class="action-buttons">
                <button class="retro-btn-small" onclick="goToSelection()">
                    <span class="btn-icon">🔄</span>
                    <span>다시</span>
                </button>
                <button class="retro-btn-small" onclick="copyResults()">
                    <span class="btn-icon">📋</span>
                    <span>복사</span>
                </button>
                <button class="retro-btn-small" onclick="shareResults()">
                    <span class="btn-icon">📤</span>
                    <span>공유</span>
                </button>
                <button class="retro-btn-small" onclick="saveResults()">
                    <span class="btn-icon">💾</span>
                    <span>저장</span>
                </button>
            </div>
        </div>
    </div>

    <script defer th:src="@{/js/fortune-result.js}"></script>
</body>

</html>