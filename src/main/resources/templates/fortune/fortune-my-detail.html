<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
  <th:block th:replace="~{fragments/head :: common-meta}" />

  <title>LUCKY LOG</title>

  <th:block th:replace="~{fragments/head :: common-resources}" />
  <link rel="stylesheet" href="../../static/css/common/toast.css" th:href="@{/css/common/toast.css}">
  <link rel="stylesheet" href="../../static/css/fortune/fortune-result.css"
    th:href="@{/css/fortune/fortune-result.css}">
  <script src="../../static/js/common/toast.js" th:src="@{/js/common/toast.js}" defer></script>
  <script src="../../static/js/fortune/fortune-my-detail.js" th:src="@{/js/fortune/fortune-my-detail.js}" defer></script>
</head>

<body>

  <!-- Thymeleaf λ©”μ‹μ§€ (μ¨κ²¨μ§„ μƒνƒ) -->
  <div id="messages">
    <span id="msg-copy-success" th:text="#{fortune.copy.success}">μ΄μ„Έ κ²°κ³Όκ°€ λ³µμ‚¬λμ—μµλ‹λ‹¤! π“‹</span>
    <span id="msg-copy-failed" th:text="#{fortune.copy.failed}">λ³µμ‚¬μ— μ‹¤ν¨ν–μµλ‹λ‹¤. π…</span>
    <span id="msg-share-success" th:text="#{fortune.share.success}">μ΄μ„Έ κ²°κ³Ό κ³µμ  νμ΄μ§€κ°€ μƒμ„±λμ—μµλ‹λ‹¤! π’</span>
    <span id="msg-share-failed" th:text="#{fortune.share.failed}">κ³µμ μ— μ‹¤ν¨ν–μµλ‹λ‹¤. π…</span>
  </div>

  <div class="float-emoji">π“</div>
  <div class="float-emoji">π”®</div>
  <div class="float-emoji">β­</div>
  <div class="float-emoji">π™</div>
  <div class="float-emoji">β¨</div>

  <div class="fortune-page-container">
    <a class="back-btn" href="/" th:href="@{/}"><span>ν™μΌλ΅</span></a>

    <div th:replace="~{fragments/header :: authButtons}"></div>

    <section class="logo user-selection-container" th:if="${myFortune != null}">
      <div class="ai-selection-container" th:object="${myFortune.fortuneOption}">
        <span th:text="*{ai.icon}">π‚</span>
        <span id="ai-name" th:text="*{ai.displayName}">Gemini</span>
      </div>
      <p class="logo-compact" th:object="${myFortune.birthInfo}">
        <span th:if="*{city != null && city.displayName != 'λ¨λ¦„'}" th:text="*{city.displayName}">
          μ„μΈνΉλ³„μ‹
        </span>
        <span th:text="*{gender.displayName}">μ—¬μ„±</span>
        <span th:text="*{calendar.displayName}">μ–‘λ ¥</span>
        <br>
        <span th:text="*{year}">1995</span>λ…„
        <span th:text="*{month}">02</span>μ›”
        <span th:text="*{day}">16</span>μΌ
        <span th:if="*{time != null && time.displayName != 'λ¨λ¦„'}" th:text="*{time.displayName}">
          μμ‹(23:30 - 01:29)
        </span>
      </p>
    </section>

    <!-- κ²°κ³Ό ν™”λ©΄ -->
    <section class="result-screen" id="result-screen" th:if="${myFortune != null}" th:object="${myFortune}">
      <div class="fortune-title"><span th:text="*{resultYear}">2025</span>λ…„
        <span th:text="*{fortuneOption.period.displayName}">μ›”λ³„</span> μ΄μ„Έ</div>
      <div class="fortune-sub-title" th:text="*{getTypeDisplayName}">π”®μΆ…ν•©μ΄</div>

      <div class="fortune-content-container">
        <div th:each="item : *{items}" class="fortune-item">
          <p th:text="${item.periodValue.displayName}" class="fortune-month">1μ›”</p>
          <p th:text="${item.content}" class="fortune-month-content">1μ›” μ΄μ„Έ λ‚΄μ©</p>
        </div>
      </div>

      <div class="action-button-container">
        <button type="button" class="action-btn retry-btn" data-retry-btn>
          <span>π”„</span>
          <span>λ‹¤μ‹</span>
        </button>
        <button type="button" class="action-btn copy-btn" data-copy-btn>
          <span>π“‹</span>
          <span>λ³µμ‚¬</span>
        </button>
        <button type="button" class="action-btn share-btn" data-share-btn disabled>
          <span>π“¤</span>
          <span>κ³µμ </span>
        </button>
        <button type="button" class="action-btn save-btn" data-list-btn>
          <span>π“</span>
          <span>λ©λ΅</span>
        </button>
      </div>
    </section>

    <!-- μ΄μ„Έ κ²°κ³Όκ°€ μ—†λ” κ²½μ° -->
    <div th:if="${myFortune == null}" data-error-container>
      <div class="error-message" th:text="${errorMessage}" data-error-message>μ €μ¥λ μ΄μ„Έλ¥Ό λ¶λ¬μ¬ μ μ—†μµλ‹λ‹¤, λ‹¤μ‹ μ‹λ„ν•΄μ£Όμ„Έμ”.</div>
    </div>

  </div>
</body>

</html>