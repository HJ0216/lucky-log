<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LUCKY LOG</title>
  <link rel="icon" href="../static/images/lucky-log-logo.png" th:href="@{/images/lucky-log-logo.png}">
  <link rel="stylesheet" href="../static/css/fortune-option.css" th:href="@{/css/fortune-option.css}">
</head>

<body>
  <div class="holographic-bg"></div>

  <div class="emoji-decoration">🔮</div>
  <div class="emoji-decoration">✨</div>
  <div class="emoji-decoration">🌟</div>
  <div class="emoji-decoration">💫</div>
  <div class="emoji-decoration">🎯</div>

  <div class="container">

    <div class="loading-screen" id="loading-screen">
      <div class="loading-animation">
        <div class="loading-ring"></div>
      </div>
      <div class="loading-text">🕐 약 1분 정도의 시간이 소요됩니다</div>
      <div class="loading-subtext">
        📜 역사 속 사주 이야기 📜
        조선 왕들의 사주
        조선시대 왕들은 즉위 전 반드시 사주를 봤는데,
        특히 세종대왕은 완벽한 제왕의 사주를 가졌다고!
      </div>
      <div class="scanline"></div>
    </div>

    <div class="contents-screen" id="contents-screen">
      <div class="logo">
        <h1>운 세</h1>
        <p th:if="${birthInfo != null}" th:object="${birthInfo}">
          <span th:if="*{city != null && city.displayName != '모름'}" th:text="*{city.displayName}">서울특별시</span>
          <span th:text="*{gender.displayName}">여성</span>
          <span th:text="*{calendar.displayName}">양력</span>
          <br>
          <span th:text="*{year}">1995년</span>년
          <span th:text="*{month}">02월</span>월
          <span th:text="*{day}">16일</span>일
          <span th:if="*{time != null && time.displayName != '모름'}" th:text="*{time.displayName}">자시(23:30 - 01:29)</span>
        </p>
      </div>

      <form action="/fortune/option" th:action="@{/fortune/option}" method="post"
            th:object="${fortuneOptionForm}" class="form-grid">
        <!-- AI 선택 -->
        <div class="field-group">
          <label class="field-label">🤖 AI 선택</label>
          <div class="ai-cards">
            <div th:each="type: ${aiTypes}" class="ai-option">
              <input type="radio" th:field="*{ai}" th:value="${type.name()}" th:disabled="${!type.enable}">
              <label th:for="${#ids.prev('ai')}">
                <div th:text="${type.icon}">🎆</div>
                <div th:text="${type.displayName}">Claude</div>
              </label>
            </div>
          </div>
        </div>

        <!-- 운세 종류 선택 -->
        <div class="field-group">
          <label class="field-label">🍀 보고 싶은 운세 (복수 선택 가능)</label>
          <div class="fortune-grid">
            <div class="fortune-option" data-tooltip="종합">
              <input type="checkbox" id="overall" th:field="*{fortunes}" value="overall">
              <label for="overall">🔮</label>
            </div>
            <div class="fortune-option" data-tooltip="재물">
              <input type="checkbox" id="money" th:field="*{fortunes}" value="money" disabled>
              <label for="money">💰</label>
            </div>
            <div class="fortune-option" data-tooltip="애정">
              <input type="checkbox" id="love" th:field="*{fortunes}" value="love" disabled>
              <label for="love">💕</label>
            </div>
            <div class="fortune-option" data-tooltip="직장 사업">
              <input type="checkbox" id="career" th:field="*{fortunes}" value="career" disabled>
              <label for="career">💼</label>
            </div>
            <div class="fortune-option" data-tooltip="학업 시험">
              <input type="checkbox" id="study" th:field="*{fortunes}" value="study" disabled>
              <label for="study">📚</label>
            </div>
            <div class="fortune-option" data-tooltip="행운">
              <input type="checkbox" id="luck" th:field="*{fortunes}" value="luck" disabled>
              <label for="luck">🍀</label>
            </div>
            <div class="fortune-option" data-tooltip="가정">
              <input type="checkbox" id="family" th:field="*{fortunes}" value="family" disabled>
              <label for="family">🏠</label>
            </div>
            <div class="fortune-option" data-tooltip="건강">
              <input type="checkbox" id="health" th:field="*{fortunes}" value="health" disabled>
              <label for="health">💪</label>
            </div>
          </div>
        </div>

        <!-- 기간 선택 -->
        <div class="field-group">
          <label class="field-label">📊 운세 주기</label>
          <div class="period-cards">
            <div class="period-option">
              <input type="radio" id="monthly" th:field="*{period}" value="monthly">
              <label for="monthly">
                <div>📆</div>
                <div>월별</div>
              </label>
            </div>
            <div class="period-option">
              <input type="radio" id="quarterly" th:field="*{period}" value="quarterly" disabled>
              <label for="quarterly">
                <div>📊</div>
                <div>분기별</div>
              </label>
            </div>
            <div class="period-option">
              <input type="radio" id="yearly" th:field="*{period}" value="yearly" disabled>
              <label for="yearly">
                <div>📋</div>
                <div>올 한해</div>
              </label>
            </div>
          </div>
        </div>

        <!-- 에러 메시지 -->
        <div th:if="${errorMessages != null and !errorMessages.empty}" class="error-container">
          <div th:each="message : ${errorMessages}" class="error-message" th:text="${message}"></div>
        </div>

        <div class="retro-btn-container">
          <button type="submit" class="retro-btn">✨ 운세 확인 ✨</button>
        </div>
      </form>

      <div style="position: absolute; top: 20px; left: 20px;">
        <button type="button" class="back-btn" onclick="goToBirthInfo()">←</button>
      </div>

    </div>
  </div>

  <script defer src="../static/js/fortune-option.js" th:src="@{/js/fortune-option.js}"></script>
</body>

</html>